<ui:composition xmlns="http://www.w3.org/1999/xhtml"
                xmlns:ui="jakarta.faces.facelets"
                xmlns:f="jakarta.faces.core"
                xmlns:p="http://primefaces.org/ui"
                xmlns:h="jakarta.faces.html"
                template="/templates/masterLayout.xhtml">
  <ui:define name="chapterItem">
    <p:fieldset legend="Available Documents">
      <p:dataGrid id="availableDocs" columns="3" var="doc"
                  value="#{integrationDragDrop.availableDocs}">
        <p:column>
          <p:panel header="#{doc.title}" style="text-align:center">
            <h:graphicImage id="pnl" library="images"
                            name="dragdrop/#{doc.extension}.png"/>
          </p:panel>
          <p:draggable for="pnl" revert="true" helper="clone"/>
        </p:column>
      </p:dataGrid>
    </p:fieldset>

    <p:fieldset id="deletedDocs" legend="Recycle Bin" style="margin-top:20px">
      <p:outputPanel id="dropArea" styleClass="slot">
        <h:outputText value="Drop here"
                      rendered="#{empty integrationDragDrop.deletedDocs}"
                      style="font-size:1.5rem"/>

        <p:dataTable var="doc"
                     value="#{integrationDragDrop.deletedDocs}"
                     rendered="#{not empty integrationDragDrop.deletedDocs}">

          <p:column headerText="Title">
            <h:outputText value="#{doc.title}"/>
          </p:column>
          <p:column headerText="Size (bytes)">
            <h:outputText value="#{doc.size}"/>
          </p:column>
          <p:column headerText="Creator">
            <h:outputText value="#{doc.creator}"/>
          </p:column>
          <p:column headerText="Creation Date">
            <h:outputText value="#{doc.creationDate}">
              <f:convertDateTime pattern="dd.MM.yyyy"/>
            </h:outputText>
          </p:column>
        </p:dataTable>
      </p:outputPanel>
    </p:fieldset>

    <p:droppable for="deletedDocs" tolerance="touch" activeStyleClass="ui-state-highlight"
                 datasource="availableDocs">
      <p:ajax listener="#{integrationDragDrop.onDocumentDrop}" update="dropArea availableDocs"/>
    </p:droppable>
  </ui:define>

  <ui:define name="appResources">
    <h:outputStylesheet library="css" name="chapter8/integrationDragDrop.css"/>
  </ui:define>
</ui:composition>